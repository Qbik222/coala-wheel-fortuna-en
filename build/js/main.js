"use strict";

document.addEventListener("DOMContentLoaded", function () {
  var days = document.querySelectorAll(".wheel__days-item");
  var popupDays = document.querySelectorAll(".popup__days-item");
  var popupDaysMob = document.querySelectorAll(".days__item");
  var currentDay = 5;
  function setDays(days, currentDay) {
    days.forEach(function (day, i) {
      ++i;
      day.classList.toggle("next", i > currentDay);
      day.classList.toggle("past", i < currentDay);
      day.classList.toggle("active", i === currentDay);
    });
  }
  function daysRemind(days, classAnim) {
    var delay = 900;
    days.forEach(function (day, i) {
      setTimeout(function () {
        day.classList.add(classAnim);
        setTimeout(function () {
          return day.classList.remove(classAnim);
        }, 1200);
      }, delay * i);
    });
  }

  // const randomInterval = Math.random() * (20000 - 10000) + 10000;
  var randomInterval = Math.random() * (6000 - 4000) + 4000;
  function addFireworks(containerSelector, numberOfFireworks) {
    // Створення нового блоку .fireworks-wrap
    var fireworksWrap = document.createElement('div');
    fireworksWrap.className = 'fireworks-wrap';

    // Додавання вказаної кількості .firework елементів до fireworksWrap
    for (var i = 0; i < numberOfFireworks; i++) {
      var firework = document.createElement('div');
      firework.className = 'firework';
      fireworksWrap.appendChild(firework);
    }

    // Знаходимо контейнер, в який хочемо додати fireworksWrap
    var container = document.querySelector(containerSelector);

    // Додаємо fireworksWrap до контейнера
    if (container) {
      container.appendChild(fireworksWrap);
    } else {
      console.error("\u041A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 \u0437 \u0441\u0435\u043B\u0435\u043A\u0442\u043E\u0440\u043E\u043C \"".concat(containerSelector, "\" \u043D\u0435 \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u043E."));
    }
  }
  function removeFireworks(containerSelector) {
    // Знаходимо контейнер
    var container = document.querySelector(containerSelector);

    // Якщо контейнер існує, знаходимо в ньому блок .fireworks-wrap і видаляємо його
    if (container) {
      var fireworksWrap = container.querySelector('.fireworks-wrap');
      if (fireworksWrap) {
        fireworksWrap.remove();
      } else {
        console.warn("\u0415\u043B\u0435\u043C\u0435\u043D\u0442 \u0437 \u043A\u043B\u0430\u0441\u043E\u043C \".fireworks-wrap\" \u043D\u0435 \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u043E \u0432 \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440\u0456 ".concat(containerSelector, "."));
      }
    } else {
      console.error("\u041A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 \u0437 \u0441\u0435\u043B\u0435\u043A\u0442\u043E\u0440\u043E\u043C \"".concat(containerSelector, "\" \u043D\u0435 \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u043E."));
    }
  }

  // Використання функції для видалення блоку
  //     removeFireworks('.container');

  // Використання функції для додавання блоку
  //

  function startRandomInterval() {
    var randomInterval = Math.random() * (20000 - 10000) + 10000; // Випадковий інтервал між 10 і 20 секундами
    daysRemind(days, "remind");
    daysRemind(popupDays, "remind");
    daysRemind(popupDaysMob, "remind");
    setTimeout(startRandomInterval, randomInterval);
  }
  startRandomInterval();
  daysRemind(days, "remind");
  setDays(days, currentDay);
  setDays(popupDays, currentDay);
  setDays(popupDaysMob, currentDay);
  // addAnimationClass()

  /// wheel logic
  var wheelSections = document.querySelector(".wheel__sections");
  var wheelWrap = document.querySelector(".wheel__wrap");
  var wheelArrow = document.querySelector(".wheel__arrow");
  var wheelBtn = document.querySelector(".wheel__btn");
  var spinBg = document.querySelector(".spin-bg");
  var salut = document.querySelector(".fireworks-wrap");
  var bubleBtn = document.querySelector(".wheel__days-icons");
  var wheelBuble = document.querySelector(".wheel__buble");
  var popupContainer = document.querySelector(".popups");
  var popup = document.querySelector(".popup");
  var popupCloseBtn = document.querySelector(".popup__close");
  bubleBtn.addEventListener("click", function (e) {
    wheelBuble.classList.toggle("_hidden");
    document.addEventListener("click", function (e) {
      if (e.target !== bubleBtn) wheelBuble.classList.add("_hidden");
    });
  });
  var prizes = ['iphone', 'ecoflow', 'merch', 'nothing', "bonuses"];
  function getRandomPrize(arr) {
    return arr[Math.floor(Math.random() * prizes.length)];
  }
  function showPopup(sections, wheel, showClass, currentDay, spinBg, closeBtn, popupContainer, popup) {
    // document.querySelector(".fav-page").classList.add("popupBg")
    popup.classList.add("".concat(showClass));
    popup.classList.contains('_nothing') === true ? null : addFireworks(".popups", 7);
    currentDay === 7 ? popup.classList.add("_done") : popup.classList.add("_incomplete");
    popupContainer.classList.add("_opacity", "_zIndex");
    document.body.style.overflow = "hidden";
    spinBg.classList.remove("showSpinBg");
    var pers = document.querySelectorAll(".popup__pers");
    var prize = document.querySelectorAll(".popup__prize");
    var buble = document.querySelectorAll(".popup__buble");
    var popupBody = document.querySelector(".popup__main");
    var popupTitle = document.querySelectorAll(".popup__title");
    var popupLeftArrow = document.querySelectorAll(".popup__decor-left");
    var popupRightArrow = document.querySelectorAll(".popup__decor-right");
    currentDay === 7 ? popupBody.classList.add("_done") : popup.classList.add("_incomplete");
    document.querySelector(".fav-page").classList.remove("bgScale");
    function addAnim(arr, classAnim) {
      arr.forEach(function (item) {
        return item.classList.add("".concat(classAnim));
      });
    }

    //popup animations
    popupBody.classList.add("popupMainAnim");
    setTimeout(function () {
      addAnim(pers, "popupPersAnim");
      addAnim(buble, "popupBubleAnim");
    }, 600);
    setTimeout(function () {
      return addAnim(prize, "popupPrizeAnim");
    }, 1200);
    setTimeout(function () {
      return popupTitle.forEach(function (item) {
        return item.classList.add("popupTitleAnim");
      });
    }, 1800);
    setTimeout(function () {
      return popupLeftArrow.forEach(function (item) {
        return item.classList.add("popupLeftArrAnim");
      });
    }, 2400);
    setTimeout(function () {
      return popupRightArrow.forEach(function (item) {
        return item.classList.add("popupRightArrAnim");
      });
    }, 2700);

    //popup animations

    closeBtn.addEventListener("click", function () {
      popup.classList.contains('_nothing') === true ? null : addFireworks(".wheel", 7);
      wheel.classList.add("_lock");
      wheel.classList.remove("wheelSizeIncrease");
      document.body.style.overflow = "auto";
      popupContainer.classList.remove("_opacity", "_zIndex");
      popup.classList.remove("".concat(showClass), '_done', '_incomplete');
      removeFireworks(".popups");
      console.log(popup.classList.contains('_nothing'));

      // popupContainer.classList.contains('_nothing') === true ?  null :
    });
  }

  function spinWheel(position, animation, sections, btn, wheel, arrow, prize, spinBg, salut) {
    sections.addEventListener("animationend", function () {
      sections.style.transform = "translate(-50%, -50%) rotate(".concat(position, "deg)");
      // prize === "nothing" ? null : salut.classList.add("_opacity", "_zIndex")
      console.log(prize);
    }, {
      once: true
    });
    sections.classList.add("".concat(animation));
    arrow.style.opacity = "0";
    wheel.classList.add("wheelSizeIncrease");
    document.querySelector(".fav-page").classList.add("bgScale");
    spinBg.classList.add("showSpinBg");
    btn.style.pointerEvents = "none";
  }
  function firstSpin(sections, btn, wheel, arrow, prize, spinBg, salut) {
    btn.addEventListener("click", function () {
      if (prize === "iphone") {
        sections.addEventListener("animationend", function () {
          return showPopup(sections, wheel, "_iphone", currentDay, spinBg, popupCloseBtn, popupContainer, popup);
        });
        spinWheel(1800, "iphonePrize", sections, btn, wheel, arrow, prize, spinBg, salut);
      }
      if (prize === "ecoflow") {
        sections.addEventListener("animationend", function () {
          return showPopup(sections, wheel, "_ecoflow", currentDay, spinBg, popupCloseBtn, popupContainer, popup);
        });
        spinWheel(1665, "ecoflowPrize", sections, btn, wheel, arrow, prize, spinBg, salut);
      }
      if (prize === "merch") {
        sections.addEventListener("animationend", function () {
          return showPopup(sections, wheel, "_merch", currentDay, spinBg, popupCloseBtn, popupContainer, popup);
        });
        spinWheel(1711, "merchPrize", sections, btn, wheel, arrow, prize, spinBg, salut);
      }
      if (prize === "nothing") {
        sections.addEventListener("animationend", function () {
          return showPopup(sections, wheel, "_nothing", currentDay, spinBg, popupCloseBtn, popupContainer, popup);
        });
        spinWheel(1755, "nothingPrize", sections, btn, wheel, arrow, prize, spinBg, salut);
      }
      if (prize === "bonuses") {
        sections.addEventListener("animationend", function () {
          return showPopup(sections, wheel, "_bonus", currentDay, spinBg, popupCloseBtn, popupContainer, popup);
        });
        spinWheel(1935, "bonusesPrize", sections, btn, wheel, arrow, prize, spinBg, salut);
      }
    });
  }
  firstSpin(wheelSections, wheelBtn, wheelWrap, wheelArrow, getRandomPrize(prizes), spinBg, salut);

  //// accordion

  var accordionHeaders = document.querySelectorAll('.accordion__header');
  accordionHeaders.forEach(function (header) {
    header.addEventListener('click', function () {
      var content = header.nextElementSibling;
      document.querySelectorAll('.accordion__content').forEach(function (item) {
        if (item !== content) {
          item.style.display = 'none';
          item.previousElementSibling.classList.remove('open');
        }
      });
      if (content.style.display === 'block') {
        content.style.display = 'none';
        header.classList.remove('open');
      } else {
        content.style.display = 'block';
        header.classList.add('open');
      }
    });
  });

  //// for test

  var btnsWrap = document.querySelector('.btns-wrap');
  var buttons = btnsWrap.querySelectorAll('button');
  var dropIphoneButton = document.querySelector('.drop-iphone');
  var dropEcoflowButton = document.querySelector('.drop-ecoflow');
  var dropNothingButton = document.querySelector('.drop-nothing');
  var dropMerchButton = document.querySelector('.drop-merch');
  var dropBonusButton = document.querySelector('.drop-bonus');
  var dropDone = document.querySelector('.drop-done');
  var dropLock = document.querySelector('.drop-lock');
  // const dropIncomplete = document.querySelector('.drop-incomplete');
  var dropMenu = document.querySelector('.drop-menu');
  dropMenu.addEventListener("click", function () {
    return btnsWrap.classList.toggle("_hidden");
  });
  firstSpin(wheelSections, dropIphoneButton, wheelWrap, wheelArrow, "iphone", spinBg, salut);
  firstSpin(wheelSections, dropEcoflowButton, wheelWrap, wheelArrow, "ecoflow", spinBg, salut);
  firstSpin(wheelSections, dropNothingButton, wheelWrap, wheelArrow, "nothing", spinBg, salut);
  firstSpin(wheelSections, dropMerchButton, wheelWrap, wheelArrow, "merch", spinBg, salut);
  firstSpin(wheelSections, dropBonusButton, wheelWrap, wheelArrow, "bonuses", spinBg, salut);
  buttons.forEach(function (item) {
    item.addEventListener("click", function () {
      wheelSections.style.animationDuration = "0.1s";
      wheelSections.addEventListener("animationend", function () {
        wheelSections.style.animationDuration = "8s";
      });
    });
  });
  dropLock.addEventListener("click", function () {
    return wheelWrap.classList.toggle("_lock");
  });
  dropDone.addEventListener("click", function () {
    return currentDay = 7;
  });
  // localStorage.setItem(currentDay, currentDay)
  // dropIncomplete.addEventListener("click", () => currentDay = 3)
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZGF5cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwb3B1cERheXMiLCJwb3B1cERheXNNb2IiLCJjdXJyZW50RGF5Iiwic2V0RGF5cyIsImZvckVhY2giLCJkYXkiLCJpIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZGF5c1JlbWluZCIsImNsYXNzQW5pbSIsImRlbGF5Iiwic2V0VGltZW91dCIsImFkZCIsInJlbW92ZSIsInJhbmRvbUludGVydmFsIiwiTWF0aCIsInJhbmRvbSIsImFkZEZpcmV3b3JrcyIsImNvbnRhaW5lclNlbGVjdG9yIiwibnVtYmVyT2ZGaXJld29ya3MiLCJmaXJld29ya3NXcmFwIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImZpcmV3b3JrIiwiYXBwZW5kQ2hpbGQiLCJjb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiY29uc29sZSIsImVycm9yIiwicmVtb3ZlRmlyZXdvcmtzIiwid2FybiIsInN0YXJ0UmFuZG9tSW50ZXJ2YWwiLCJ3aGVlbFNlY3Rpb25zIiwid2hlZWxXcmFwIiwid2hlZWxBcnJvdyIsIndoZWVsQnRuIiwic3BpbkJnIiwic2FsdXQiLCJidWJsZUJ0biIsIndoZWVsQnVibGUiLCJwb3B1cENvbnRhaW5lciIsInBvcHVwIiwicG9wdXBDbG9zZUJ0biIsImUiLCJ0YXJnZXQiLCJwcml6ZXMiLCJnZXRSYW5kb21Qcml6ZSIsImFyciIsImZsb29yIiwibGVuZ3RoIiwic2hvd1BvcHVwIiwic2VjdGlvbnMiLCJ3aGVlbCIsInNob3dDbGFzcyIsImNsb3NlQnRuIiwiY29udGFpbnMiLCJib2R5Iiwic3R5bGUiLCJvdmVyZmxvdyIsInBlcnMiLCJwcml6ZSIsImJ1YmxlIiwicG9wdXBCb2R5IiwicG9wdXBUaXRsZSIsInBvcHVwTGVmdEFycm93IiwicG9wdXBSaWdodEFycm93IiwiYWRkQW5pbSIsIml0ZW0iLCJsb2ciLCJzcGluV2hlZWwiLCJwb3NpdGlvbiIsImFuaW1hdGlvbiIsImJ0biIsImFycm93IiwidHJhbnNmb3JtIiwib25jZSIsIm9wYWNpdHkiLCJwb2ludGVyRXZlbnRzIiwiZmlyc3RTcGluIiwiYWNjb3JkaW9uSGVhZGVycyIsImhlYWRlciIsImNvbnRlbnQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJkaXNwbGF5IiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImJ0bnNXcmFwIiwiYnV0dG9ucyIsImRyb3BJcGhvbmVCdXR0b24iLCJkcm9wRWNvZmxvd0J1dHRvbiIsImRyb3BOb3RoaW5nQnV0dG9uIiwiZHJvcE1lcmNoQnV0dG9uIiwiZHJvcEJvbnVzQnV0dG9uIiwiZHJvcERvbmUiLCJkcm9wTG9jayIsImRyb3BNZW51IiwiYW5pbWF0aW9uRHVyYXRpb24iXSwibWFwcGluZ3MiOiI7O0FBQUFBLFFBQVEsQ0FBQ0MsZ0JBQWdCLENBQUMsa0JBQWtCLEVBQUUsWUFBSztFQUMvQyxJQUFNQyxJQUFJLEdBQUdGLFFBQVEsQ0FBQ0csZ0JBQWdCLENBQUMsbUJBQW1CLENBQUM7RUFDM0QsSUFBTUMsU0FBUyxHQUFHSixRQUFRLENBQUNHLGdCQUFnQixDQUFDLG1CQUFtQixDQUFDO0VBQ2hFLElBQU1FLFlBQVksR0FBR0wsUUFBUSxDQUFDRyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUM7RUFDN0QsSUFBSUcsVUFBVSxHQUFHLENBQUM7RUFFbEIsU0FBU0MsT0FBTyxDQUFDTCxJQUFJLEVBQUVJLFVBQVUsRUFBQztJQUM5QkosSUFBSSxDQUFDTSxPQUFPLENBQUMsVUFBQ0MsR0FBRyxFQUFFQyxDQUFDLEVBQUk7TUFDcEIsRUFBRUEsQ0FBQztNQUNIRCxHQUFHLENBQUNFLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDLE1BQU0sRUFBRUYsQ0FBQyxHQUFHSixVQUFVLENBQUM7TUFDNUNHLEdBQUcsQ0FBQ0UsU0FBUyxDQUFDQyxNQUFNLENBQUMsTUFBTSxFQUFFRixDQUFDLEdBQUdKLFVBQVUsQ0FBQztNQUM1Q0csR0FBRyxDQUFDRSxT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RCxTQUFTLEVBQUVDLFVBQVUsRUFBRSxTQUFTLEVBQUVFLE1BQU0sRUFBRUMsS0FBSyxDQUFDO0VBQzVGeUMsU0FBUyxDQUFDOUMsYUFBYSxFQUFFMEQsZUFBZSxFQUFFekQsU0FBUyxFQUFFQyxVQUFVLEVBQUUsT0FBTyxFQUFFRSxNQUFNLEVBQUVDLEtBQUssQ0FBQztFQUN4RnlDLFNBQVMsQ0FBQzlDLGFBQWEsRUFBRTJELGVBQWUsRUFBRTFELFNBQVMsRUFBRUMsVUFBVSxFQUFFLFNBQVMsRUFBRUUsTUFBTSxFQUFFQyxLQUFLLENBQUM7RUFFMUZpRCxPQUFPLENBQUNuRixPQUFPLENBQUMsVUFBQWdFLElBQUksRUFBRztJQUNuQkEsSUFBSSxDQUFDdkUsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQU07TUFDakNvQyxhQUFhLENBQUN5QixLQUFLLENBQUNzQyxpQkFBaUIsR0FBRyxNQUFNO01BQzlDL0QsYUFBYSxDQUFDcEMsZ0JBQWdCLENBQUMsY0FBYyxFQUFFLFlBQUs7UUFDaERvQyxhQUFhLENBQUN5QixLQUFLLENBQUNzQyxpQkFBaUIsR0FBRyxJQUFJO01BQ2hELENBQUMsQ0FBQztJQUNOLENBQUMsQ0FBQztFQUNOLENBQUMsQ0FBQztFQUVGRixRQUFRLENBQUNqRyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUU7SUFBQSxPQUFNcUMsU0FBUyxDQUFDM0IsU0FBUyxDQUFDQyxNQUFNLENBQUMsT0FBTyxDQUFDO0VBQUEsRUFBQztFQUM3RXFGLFFBQVEsQ0FBQ2hHLGdCQUFnQixDQUFDLE9BQU8sRUFBRTtJQUFBLE9BQU1LLFVBQVUsR0FBRyxDQUFDO0VBQUEsRUFBQztFQUM1RDtFQUNBO0FBRUEsQ0FBQyxDQUFDIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PntcbiAgICBjb25zdCBkYXlzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi53aGVlbF9fZGF5cy1pdGVtXCIpXG4gICAgY29uc3QgcG9wdXBEYXlzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fZGF5cy1pdGVtXCIpO1xuICAgIGNvbnN0IHBvcHVwRGF5c01vYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZGF5c19faXRlbVwiKTtcbiAgICBsZXQgY3VycmVudERheSA9IDVcblxuICAgIGZ1bmN0aW9uIHNldERheXMoZGF5cywgY3VycmVudERheSl7XG4gICAgICAgIGRheXMuZm9yRWFjaCgoZGF5LCBpKSA9PntcbiAgICAgICAgICAgICsraVxuICAgICAgICAgICAgZGF5LmNsYXNzTGlzdC50b2dnbGUoXCJuZXh0XCIsIGkgPiBjdXJyZW50RGF5KTtcbiAgICAgICAgICAgIGRheS5jbGFzc0xpc3QudG9nZ2xlKFwicGFzdFwiLCBpIDwgY3VycmVudERheSk7XG4gICAgICAgICAgICBkYXkuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiLCBpID09PSBjdXJyZW50RGF5KTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkYXlzUmVtaW5kKGRheXMsIGNsYXNzQW5pbSkge1xuICAgICAgICBsZXQgZGVsYXkgPSA5MDA7XG4gICAgICAgIGRheXMuZm9yRWFjaCgoZGF5LCBpKSA9PiB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBkYXkuY2xhc3NMaXN0LmFkZChjbGFzc0FuaW0pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZGF5LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NBbmltKSwgMTIwMClcbiAgICAgICAgICAgIH0sIGRlbGF5ICogaSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGNvbnN0IHJhbmRvbUludGVydmFsID0gTWF0aC5yYW5kb20oKSAqICgyMDAwMCAtIDEwMDAwKSArIDEwMDAwO1xuICAgIGNvbnN0IHJhbmRvbUludGVydmFsID0gTWF0aC5yYW5kb20oKSAqICg2MDAwIC0gNDAwMCkgKyA0MDAwO1xuXG5cblxuICAgIGZ1bmN0aW9uIGFkZEZpcmV3b3Jrcyhjb250YWluZXJTZWxlY3RvciwgbnVtYmVyT2ZGaXJld29ya3MpIHtcbiAgICAgICAgLy8g0KHRgtCy0L7RgNC10L3QvdGPINC90L7QstC+0LPQviDQsdC70L7QutGDIC5maXJld29ya3Mtd3JhcFxuICAgICAgICBjb25zdCBmaXJld29ya3NXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGZpcmV3b3Jrc1dyYXAuY2xhc3NOYW1lID0gJ2ZpcmV3b3Jrcy13cmFwJztcblxuICAgICAgICAvLyDQlNC+0LTQsNCy0LDQvdC90Y8g0LLQutCw0LfQsNC90L7RlyDQutGW0LvRjNC60L7RgdGC0ZYgLmZpcmV3b3JrINC10LvQtdC80LXQvdGC0ZbQsiDQtNC+IGZpcmV3b3Jrc1dyYXBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJPZkZpcmV3b3JrczsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBmaXJld29yayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgZmlyZXdvcmsuY2xhc3NOYW1lID0gJ2ZpcmV3b3JrJztcbiAgICAgICAgICAgIGZpcmV3b3Jrc1dyYXAuYXBwZW5kQ2hpbGQoZmlyZXdvcmspO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g0JfQvdCw0YXQvtC00LjQvNC+INC60L7QvdGC0LXQudC90LXRgCwg0LIg0Y/QutC40Lkg0YXQvtGH0LXQvNC+INC00L7QtNCw0YLQuCBmaXJld29ya3NXcmFwXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuXG4gICAgICAgIC8vINCU0L7QtNCw0ZTQvNC+IGZpcmV3b3Jrc1dyYXAg0LTQviDQutC+0L3RgtC10LnQvdC10YDQsFxuICAgICAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZmlyZXdvcmtzV3JhcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGDQmtC+0L3RgtC10LnQvdC10YAg0Lcg0YHQtdC70LXQutGC0L7RgNC+0LwgXCIke2NvbnRhaW5lclNlbGVjdG9yfVwiINC90LUg0LfQvdCw0LnQtNC10L3Qvi5gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZUZpcmV3b3Jrcyhjb250YWluZXJTZWxlY3Rvcikge1xuICAgICAgICAvLyDQl9C90LDRhdC+0LTQuNC80L4g0LrQvtC90YLQtdC50L3QtdGAXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuXG4gICAgICAgIC8vINCv0LrRidC+INC60L7QvdGC0LXQudC90LXRgCDRltGB0L3Rg9GULCDQt9C90LDRhdC+0LTQuNC80L4g0LIg0L3RjNC+0LzRgyDQsdC70L7QuiAuZmlyZXdvcmtzLXdyYXAg0ZYg0LLQuNC00LDQu9GP0ZTQvNC+INC50L7Qs9C+XG4gICAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpcmV3b3Jrc1dyYXAgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmZpcmV3b3Jrcy13cmFwJyk7XG4gICAgICAgICAgICBpZiAoZmlyZXdvcmtzV3JhcCkge1xuICAgICAgICAgICAgICAgIGZpcmV3b3Jrc1dyYXAucmVtb3ZlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihg0JXQu9C10LzQtdC90YIg0Lcg0LrQu9Cw0YHQvtC8IFwiLmZpcmV3b3Jrcy13cmFwXCIg0L3QtSDQt9C90LDQudC00LXQvdC+INCyINC60L7QvdGC0LXQudC90LXRgNGWICR7Y29udGFpbmVyU2VsZWN0b3J9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihg0JrQvtC90YLQtdC50L3QtdGAINC3INGB0LXQu9C10LrRgtC+0YDQvtC8IFwiJHtjb250YWluZXJTZWxlY3Rvcn1cIiDQvdC1INC30L3QsNC50LTQtdC90L4uYCk7XG4gICAgICAgIH1cbiAgICB9XG5cbi8vINCS0LjQutC+0YDQuNGB0YLQsNC90L3RjyDRhNGD0L3QutGG0ZbRlyDQtNC70Y8g0LLQuNC00LDQu9C10L3QvdGPINCx0LvQvtC60YNcbi8vICAgICByZW1vdmVGaXJld29ya3MoJy5jb250YWluZXInKTtcblxuXG5cblxuLy8g0JLQuNC60L7RgNC40YHRgtCw0L3QvdGPINGE0YPQvdC60YbRltGXINC00LvRjyDQtNC+0LTQsNCy0LDQvdC90Y8g0LHQu9C+0LrRg1xuLy9cblxuXG5cblxuXG5cblxuXG5cbiAgICBmdW5jdGlvbiBzdGFydFJhbmRvbUludGVydmFsKCkge1xuICAgICAgICBjb25zdCByYW5kb21JbnRlcnZhbCA9IE1hdGgucmFuZG9tKCkgKiAoMjAwMDAgLSAxMDAwMCkgKyAxMDAwMDsgLy8g0JLQuNC/0LDQtNC60L7QstC40Lkg0ZbQvdGC0LXRgNCy0LDQuyDQvNGW0LYgMTAg0ZYgMjAg0YHQtdC60YPQvdC00LDQvNC4XG4gICAgICAgIGRheXNSZW1pbmQoZGF5cywgXCJyZW1pbmRcIik7XG4gICAgICAgIGRheXNSZW1pbmQocG9wdXBEYXlzLCBcInJlbWluZFwiKTtcbiAgICAgICAgZGF5c1JlbWluZChwb3B1cERheXNNb2IsIFwicmVtaW5kXCIpO1xuICAgICAgICBzZXRUaW1lb3V0KHN0YXJ0UmFuZG9tSW50ZXJ2YWwsIHJhbmRvbUludGVydmFsKTtcbiAgICB9XG5cbiAgICBzdGFydFJhbmRvbUludGVydmFsKCk7XG4gICAgZGF5c1JlbWluZChkYXlzLCBcInJlbWluZFwiKVxuXG4gICAgc2V0RGF5cyhkYXlzLCBjdXJyZW50RGF5KVxuICAgIHNldERheXMocG9wdXBEYXlzLCBjdXJyZW50RGF5KVxuICAgIHNldERheXMocG9wdXBEYXlzTW9iLCBjdXJyZW50RGF5KVxuLy8gYWRkQW5pbWF0aW9uQ2xhc3MoKVxuXG4vLy8gd2hlZWwgbG9naWNcbiAgICBjb25zdCB3aGVlbFNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aGVlbF9fc2VjdGlvbnNcIilcbiAgICBjb25zdCB3aGVlbFdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndoZWVsX193cmFwXCIpXG4gICAgY29uc3Qgd2hlZWxBcnJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2hlZWxfX2Fycm93XCIpXG4gICAgY29uc3Qgd2hlZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndoZWVsX19idG5cIilcbiAgICBjb25zdCBzcGluQmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNwaW4tYmdcIilcbiAgICBjb25zdCBzYWx1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmlyZXdvcmtzLXdyYXBcIilcbiAgICBjb25zdCBidWJsZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2hlZWxfX2RheXMtaWNvbnNcIilcbiAgICBjb25zdCB3aGVlbEJ1YmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aGVlbF9fYnVibGVcIilcbiAgICBjb25zdCBwb3B1cENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBzXCIpXG4gICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwXCIpXG4gICAgY29uc3QgcG9wdXBDbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpXG5cbiAgICBidWJsZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+e1xuICAgICAgICB3aGVlbEJ1YmxlLmNsYXNzTGlzdC50b2dnbGUoXCJfaGlkZGVuXCIpXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge2lmKGUudGFyZ2V0ICE9PSBidWJsZUJ0bikgd2hlZWxCdWJsZS5jbGFzc0xpc3QuYWRkKFwiX2hpZGRlblwiKX0pXG4gICAgfSlcblxuICAgIGxldCBwcml6ZXMgPSBbJ2lwaG9uZScsICdlY29mbG93JywgJ21lcmNoJywgJ25vdGhpbmcnLCBcImJvbnVzZXNcIl1cbiAgICBmdW5jdGlvbiBnZXRSYW5kb21Qcml6ZShhcnIpIHtcbiAgICAgICAgcmV0dXJuIGFycltNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwcml6ZXMubGVuZ3RoKV07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNob3dQb3B1cChzZWN0aW9ucywgd2hlZWwsIHNob3dDbGFzcywgY3VycmVudERheSwgc3BpbkJnLCBjbG9zZUJ0biwgcG9wdXBDb250YWluZXIsIHBvcHVwKXtcbiAgICAgICAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mYXYtcGFnZVwiKS5jbGFzc0xpc3QuYWRkKFwicG9wdXBCZ1wiKVxuICAgICAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKGAke3Nob3dDbGFzc31gKVxuICAgICAgICBwb3B1cC5jbGFzc0xpc3QuY29udGFpbnMoJ19ub3RoaW5nJykgPT09IHRydWUgPyBudWxsIDogYWRkRmlyZXdvcmtzKFwiLnBvcHVwc1wiLCA3KVxuICAgICAgICBjdXJyZW50RGF5ID09PSA3ID8gcG9wdXAuY2xhc3NMaXN0LmFkZChcIl9kb25lXCIpIDogcG9wdXAuY2xhc3NMaXN0LmFkZChcIl9pbmNvbXBsZXRlXCIpXG4gICAgICAgIHBvcHVwQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJfb3BhY2l0eVwiLCBcIl96SW5kZXhcIilcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCJcbiAgICAgICAgc3BpbkJnLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93U3BpbkJnXCIpXG4gICAgICAgIGNvbnN0IHBlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19wZXJzXCIpXG4gICAgICAgIGNvbnN0IHByaXplID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fcHJpemVcIilcbiAgICAgICAgY29uc3QgYnVibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19idWJsZVwiKVxuICAgICAgICBjb25zdCBwb3B1cEJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19tYWluXCIpXG4gICAgICAgIGNvbnN0IHBvcHVwVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX190aXRsZVwiKVxuICAgICAgICBjb25zdCBwb3B1cExlZnRBcnJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2RlY29yLWxlZnRcIilcbiAgICAgICAgY29uc3QgcG9wdXBSaWdodEFycm93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fZGVjb3ItcmlnaHRcIilcbiAgICAgICAgY3VycmVudERheSA9PT0gNyA/IHBvcHVwQm9keS5jbGFzc0xpc3QuYWRkKFwiX2RvbmVcIikgOiBwb3B1cC5jbGFzc0xpc3QuYWRkKFwiX2luY29tcGxldGVcIilcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mYXYtcGFnZVwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiYmdTY2FsZVwiKVxuXG5cblxuICAgICAgICBmdW5jdGlvbiBhZGRBbmltKGFyciwgY2xhc3NBbmltKXtcbiAgICAgICAgICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5jbGFzc0xpc3QuYWRkKGAke2NsYXNzQW5pbX1gKSApXG4gICAgICAgIH1cblxuICAgICAgICAvL3BvcHVwIGFuaW1hdGlvbnNcbiAgICAgICAgcG9wdXBCb2R5LmNsYXNzTGlzdC5hZGQoXCJwb3B1cE1haW5BbmltXCIpXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICBhZGRBbmltKHBlcnMsIFwicG9wdXBQZXJzQW5pbVwiKVxuICAgICAgICAgICAgYWRkQW5pbShidWJsZSwgXCJwb3B1cEJ1YmxlQW5pbVwiKVxuICAgICAgICB9LCA2MDApXG4gICAgICAgIHNldFRpbWVvdXQoICgpID0+IGFkZEFuaW0ocHJpemUsIFwicG9wdXBQcml6ZUFuaW1cIiksIDEyMDApXG4gICAgICAgIHNldFRpbWVvdXQoICgpID0+IHBvcHVwVGl0bGUuZm9yRWFjaChpdGVtID0+IGl0ZW0uY2xhc3NMaXN0LmFkZChcInBvcHVwVGl0bGVBbmltXCIpKSwgMTgwMClcbiAgICAgICAgc2V0VGltZW91dCggKCkgPT4gcG9wdXBMZWZ0QXJyb3cuZm9yRWFjaChpdGVtID0+IGl0ZW0uY2xhc3NMaXN0LmFkZChcInBvcHVwTGVmdEFyckFuaW1cIikpLCAyNDAwKVxuICAgICAgICBzZXRUaW1lb3V0KCAoKSA9PiBwb3B1cFJpZ2h0QXJyb3cuZm9yRWFjaChpdGVtID0+IGl0ZW0uY2xhc3NMaXN0LmFkZChcInBvcHVwUmlnaHRBcnJBbmltXCIpKSwgMjcwMClcblxuICAgICAgICAvL3BvcHVwIGFuaW1hdGlvbnNcblxuXG4gICAgICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICAgICAgICAgIHBvcHVwLmNsYXNzTGlzdC5jb250YWlucygnX25vdGhpbmcnKSA9PT0gdHJ1ZSA/IG51bGwgOiBhZGRGaXJld29ya3MoXCIud2hlZWxcIiwgNylcbiAgICAgICAgICAgIHdoZWVsLmNsYXNzTGlzdC5hZGQoXCJfbG9ja1wiKVxuICAgICAgICAgICAgd2hlZWwuY2xhc3NMaXN0LnJlbW92ZShcIndoZWVsU2l6ZUluY3JlYXNlXCIpXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCJcbiAgICAgICAgICAgIHBvcHVwQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJfb3BhY2l0eVwiLCBcIl96SW5kZXhcIilcbiAgICAgICAgICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoYCR7c2hvd0NsYXNzfWAsICdfZG9uZScsICdfaW5jb21wbGV0ZScpXG4gICAgICAgICAgICByZW1vdmVGaXJld29ya3MoXCIucG9wdXBzXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocG9wdXAuY2xhc3NMaXN0LmNvbnRhaW5zKCdfbm90aGluZycpKVxuXG4gICAgICAgICAgICAvLyBwb3B1cENvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ19ub3RoaW5nJykgPT09IHRydWUgPyAgbnVsbCA6XG5cblxuICAgICAgICB9KVxuICAgIH1cbiAgICBmdW5jdGlvbiBzcGluV2hlZWwocG9zaXRpb24sIGFuaW1hdGlvbiwgc2VjdGlvbnMsIGJ0biwgd2hlZWwsIGFycm93LCBwcml6ZSwgc3BpbkJnLCBzYWx1dCl7XG4gICAgICAgIHNlY3Rpb25zLmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIiwgKCkgPT57XG4gICAgICAgICAgICBzZWN0aW9ucy5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKC01MCUsIC01MCUpIHJvdGF0ZSgke3Bvc2l0aW9ufWRlZylgXG4gICAgICAgICAgICAvLyBwcml6ZSA9PT0gXCJub3RoaW5nXCIgPyBudWxsIDogc2FsdXQuY2xhc3NMaXN0LmFkZChcIl9vcGFjaXR5XCIsIFwiX3pJbmRleFwiKVxuICAgICAgICAgICAgY29uc29sZS5sb2cocHJpemUpXG4gICAgICAgIH0sIHtvbmNlOiB0cnVlfSlcbiAgICAgICAgc2VjdGlvbnMuY2xhc3NMaXN0LmFkZChgJHthbmltYXRpb259YClcbiAgICAgICAgYXJyb3cuc3R5bGUub3BhY2l0eSA9IFwiMFwiXG4gICAgICAgIHdoZWVsLmNsYXNzTGlzdC5hZGQoXCJ3aGVlbFNpemVJbmNyZWFzZVwiKVxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZhdi1wYWdlXCIpLmNsYXNzTGlzdC5hZGQoXCJiZ1NjYWxlXCIpXG4gICAgICAgIHNwaW5CZy5jbGFzc0xpc3QuYWRkKFwic2hvd1NwaW5CZ1wiKVxuICAgICAgICBidG4uc3R5bGUucG9pbnRlckV2ZW50cyA9IFwibm9uZVwiXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmlyc3RTcGluKHNlY3Rpb25zLCBidG4sIHdoZWVsLCBhcnJvdywgcHJpemUsIHNwaW5CZywgc2FsdXQpe1xuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+e1xuICAgICAgICAgICAgaWYocHJpemUgPT09IFwiaXBob25lXCIpe1xuICAgICAgICAgICAgICAgIHNlY3Rpb25zLmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIiwgKCkgPT4gc2hvd1BvcHVwKHNlY3Rpb25zLCB3aGVlbCwgXCJfaXBob25lXCIsIGN1cnJlbnREYXksIHNwaW5CZywgcG9wdXBDbG9zZUJ0biwgcG9wdXBDb250YWluZXIsIHBvcHVwKSlcbiAgICAgICAgICAgICAgICBzcGluV2hlZWwoMTgwMCwgXCJpcGhvbmVQcml6ZVwiLCBzZWN0aW9ucywgYnRuLCB3aGVlbCwgYXJyb3csIHByaXplLCBzcGluQmcsIHNhbHV0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYocHJpemUgPT09IFwiZWNvZmxvd1wiKXtcbiAgICAgICAgICAgICAgICBzZWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsICgpID0+IHNob3dQb3B1cChzZWN0aW9ucywgd2hlZWwsIFwiX2Vjb2Zsb3dcIiwgY3VycmVudERheSwgc3BpbkJnLCBwb3B1cENsb3NlQnRuLCBwb3B1cENvbnRhaW5lciwgcG9wdXApKVxuICAgICAgICAgICAgICAgIHNwaW5XaGVlbCgxNjY1LCBcImVjb2Zsb3dQcml6ZVwiLCBzZWN0aW9ucywgYnRuLCB3aGVlbCwgYXJyb3csIHByaXplLCBzcGluQmcsIHNhbHV0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYocHJpemUgPT09IFwibWVyY2hcIil7XG4gICAgICAgICAgICAgICAgc2VjdGlvbnMuYWRkRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLCAoKSA9PiBzaG93UG9wdXAoc2VjdGlvbnMsIHdoZWVsLCBcIl9tZXJjaFwiLCBjdXJyZW50RGF5LCBzcGluQmcsIHBvcHVwQ2xvc2VCdG4sIHBvcHVwQ29udGFpbmVyLCBwb3B1cCkpXG4gICAgICAgICAgICAgICAgc3BpbldoZWVsKDE3MTEsIFwibWVyY2hQcml6ZVwiLCBzZWN0aW9ucywgYnRuLCB3aGVlbCwgYXJyb3csIHByaXplLCBzcGluQmcsIHNhbHV0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYocHJpemUgPT09IFwibm90aGluZ1wiKXtcbiAgICAgICAgICAgICAgICBzZWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsICgpID0+IHNob3dQb3B1cChzZWN0aW9ucywgd2hlZWwsXCJfbm90aGluZ1wiLCBjdXJyZW50RGF5LCBzcGluQmcsIHBvcHVwQ2xvc2VCdG4sIHBvcHVwQ29udGFpbmVyLCBwb3B1cCkpXG4gICAgICAgICAgICAgICAgc3BpbldoZWVsKDE3NTUsIFwibm90aGluZ1ByaXplXCIsIHNlY3Rpb25zLCBidG4sIHdoZWVsLCBhcnJvdywgcHJpemUsIHNwaW5CZywgc2FsdXQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihwcml6ZSA9PT0gXCJib251c2VzXCIpe1xuICAgICAgICAgICAgICAgIHNlY3Rpb25zLmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIiwgKCkgPT4gc2hvd1BvcHVwKHNlY3Rpb25zLCB3aGVlbCwgXCJfYm9udXNcIiwgY3VycmVudERheSwgc3BpbkJnLCBwb3B1cENsb3NlQnRuLCBwb3B1cENvbnRhaW5lciwgcG9wdXApKVxuICAgICAgICAgICAgICAgIHNwaW5XaGVlbCgxOTM1LCBcImJvbnVzZXNQcml6ZVwiLCBzZWN0aW9ucywgYnRuLCB3aGVlbCwgYXJyb3csIHByaXplLCBzcGluQmcsIHNhbHV0KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZpcnN0U3Bpbih3aGVlbFNlY3Rpb25zLCB3aGVlbEJ0biwgd2hlZWxXcmFwLCB3aGVlbEFycm93LCBnZXRSYW5kb21Qcml6ZShwcml6ZXMpLCBzcGluQmcsIHNhbHV0KVxuXG5cblxuXG5cblxuLy8vLyBhY2NvcmRpb25cblxuICAgIGNvbnN0IGFjY29yZGlvbkhlYWRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjb3JkaW9uX19oZWFkZXInKTtcbiAgICBhY2NvcmRpb25IZWFkZXJzLmZvckVhY2goaGVhZGVyID0+IHtcbiAgICAgICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGhlYWRlci5uZXh0RWxlbWVudFNpYmxpbmc7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY2NvcmRpb25fX2NvbnRlbnQnKS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtICE9PSBjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLmRpc3BsYXkgPT09ICdibG9jaycpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuXG4vLy8vIGZvciB0ZXN0XG5cbiAgICBjb25zdCBidG5zV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG5zLXdyYXAnKTtcblxuICAgIGNvbnN0IGJ1dHRvbnMgPSBidG5zV3JhcC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKTtcblxuICAgIGNvbnN0IGRyb3BJcGhvbmVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJvcC1pcGhvbmUnKTtcbiAgICBjb25zdCBkcm9wRWNvZmxvd0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcm9wLWVjb2Zsb3cnKTtcbiAgICBjb25zdCBkcm9wTm90aGluZ0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcm9wLW5vdGhpbmcnKTtcbiAgICBjb25zdCBkcm9wTWVyY2hCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJvcC1tZXJjaCcpO1xuICAgIGNvbnN0IGRyb3BCb251c0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcm9wLWJvbnVzJyk7XG4gICAgY29uc3QgZHJvcERvbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJvcC1kb25lJyk7XG4gICAgY29uc3QgZHJvcExvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJvcC1sb2NrJyk7XG4vLyBjb25zdCBkcm9wSW5jb21wbGV0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcm9wLWluY29tcGxldGUnKTtcbiAgICBjb25zdCBkcm9wTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcm9wLW1lbnUnKTtcblxuICAgIGRyb3BNZW51LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+IGJ0bnNXcmFwLmNsYXNzTGlzdC50b2dnbGUoXCJfaGlkZGVuXCIpKVxuXG4gICAgZmlyc3RTcGluKHdoZWVsU2VjdGlvbnMsIGRyb3BJcGhvbmVCdXR0b24sIHdoZWVsV3JhcCwgd2hlZWxBcnJvdywgXCJpcGhvbmVcIiwgc3BpbkJnLCBzYWx1dClcbiAgICBmaXJzdFNwaW4od2hlZWxTZWN0aW9ucywgZHJvcEVjb2Zsb3dCdXR0b24sIHdoZWVsV3JhcCwgd2hlZWxBcnJvdywgXCJlY29mbG93XCIsIHNwaW5CZywgc2FsdXQpXG4gICAgZmlyc3RTcGluKHdoZWVsU2VjdGlvbnMsIGRyb3BOb3RoaW5nQnV0dG9uLCB3aGVlbFdyYXAsIHdoZWVsQXJyb3csIFwibm90aGluZ1wiLCBzcGluQmcsIHNhbHV0KVxuICAgIGZpcnN0U3Bpbih3aGVlbFNlY3Rpb25zLCBkcm9wTWVyY2hCdXR0b24sIHdoZWVsV3JhcCwgd2hlZWxBcnJvdywgXCJtZXJjaFwiLCBzcGluQmcsIHNhbHV0KVxuICAgIGZpcnN0U3Bpbih3aGVlbFNlY3Rpb25zLCBkcm9wQm9udXNCdXR0b24sIHdoZWVsV3JhcCwgd2hlZWxBcnJvdywgXCJib251c2VzXCIsIHNwaW5CZywgc2FsdXQpXG5cbiAgICBidXR0b25zLmZvckVhY2goaXRlbSA9PntcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgd2hlZWxTZWN0aW9ucy5zdHlsZS5hbmltYXRpb25EdXJhdGlvbiA9IFwiMC4xc1wiXG4gICAgICAgICAgICB3aGVlbFNlY3Rpb25zLmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIiwgKCkgPT57XG4gICAgICAgICAgICAgICAgd2hlZWxTZWN0aW9ucy5zdHlsZS5hbmltYXRpb25EdXJhdGlvbiA9IFwiOHNcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgZHJvcExvY2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHdoZWVsV3JhcC5jbGFzc0xpc3QudG9nZ2xlKFwiX2xvY2tcIikpXG4gICAgZHJvcERvbmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGN1cnJlbnREYXkgPSA3KVxuLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oY3VycmVudERheSwgY3VycmVudERheSlcbi8vIGRyb3BJbmNvbXBsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBjdXJyZW50RGF5ID0gMylcblxufSlcblxuXG5cblxuIl19
