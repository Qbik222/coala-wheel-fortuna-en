"use strict";

document.addEventListener("DOMContentLoaded", function () {
  var days = document.querySelectorAll(".wheel__days-item");
  var popupDays = document.querySelectorAll(".popup__days-item");
  var popupDaysMob = document.querySelectorAll(".days__item");
  var currentDay = 5;
  function setDays(days, currentDay) {
    days.forEach(function (day, i) {
      ++i;
      day.classList.toggle("next", i > currentDay);
      day.classList.toggle("past", i < currentDay);
      day.classList.toggle("active", i === currentDay);
    });
  }
  function daysRemind(days, classAnim) {
    var delay = 900;
    days.forEach(function (day, i) {
      setTimeout(function () {
        day.classList.add(classAnim);
        setTimeout(function () {
          return day.classList.remove(classAnim);
        }, 1200);
      }, delay * i);
    });
  }

  // const randomInterval = Math.random() * (20000 - 10000) + 10000;
  var randomInterval = Math.random() * (6000 - 4000) + 4000;
  function addFireworks(containerSelector, numberOfFireworks) {
    // Створення нового блоку .fireworks-wrap
    var fireworksWrap = document.createElement('div');
    fireworksWrap.className = 'fireworks-wrap';

    // Додавання вказаної кількості .firework елементів до fireworksWrap
    for (var i = 0; i < numberOfFireworks; i++) {
      var firework = document.createElement('div');
      firework.className = 'firework';
      fireworksWrap.appendChild(firework);
    }

    // Знаходимо контейнер, в який хочемо додати fireworksWrap
    var container = document.querySelector(containerSelector);

    // Додаємо fireworksWrap до контейнера
    if (container) {
      container.appendChild(fireworksWrap);
    } else {
      console.error("\u041A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 \u0437 \u0441\u0435\u043B\u0435\u043A\u0442\u043E\u0440\u043E\u043C \"".concat(containerSelector, "\" \u043D\u0435 \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u043E."));
    }
  }
  function removeFireworks(containerSelector) {
    // Знаходимо контейнер
    var container = document.querySelector(containerSelector);

    // Якщо контейнер існує, знаходимо в ньому блок .fireworks-wrap і видаляємо його
    if (container) {
      var fireworksWrap = container.querySelector('.fireworks-wrap');
      if (fireworksWrap) {
        fireworksWrap.remove();
      } else {
        console.warn("\u0415\u043B\u0435\u043C\u0435\u043D\u0442 \u0437 \u043A\u043B\u0430\u0441\u043E\u043C \".fireworks-wrap\" \u043D\u0435 \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u043E \u0432 \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440\u0456 ".concat(containerSelector, "."));
      }
    } else {
      console.error("\u041A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 \u0437 \u0441\u0435\u043B\u0435\u043A\u0442\u043E\u0440\u043E\u043C \"".concat(containerSelector, "\" \u043D\u0435 \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u043E."));
    }
  }

  // Використання функції для видалення блоку
  //     removeFireworks('.container');

  // Використання функції для додавання блоку
  //

  function startRandomInterval() {
    var randomInterval = Math.random() * (20000 - 10000) + 10000; // Випадковий інтервал між 10 і 20 секундами
    daysRemind(days, "remind");
    daysRemind(popupDays, "remind");
    daysRemind(popupDaysMob, "remind");
    setTimeout(startRandomInterval, randomInterval);
  }
  startRandomInterval();
  daysRemind(days, "remind");
  setDays(days, currentDay);
  setDays(popupDays, currentDay);
  setDays(popupDaysMob, currentDay);
  // addAnimationClass()

  /// wheel logic
  var wheelSections = document.querySelector(".wheel__sections");
  var wheelWrap = document.querySelector(".wheel__wrap");
  var wheelArrow = document.querySelector(".wheel__arrow");
  var wheelBtn = document.querySelector(".wheel__btn");
  var spinBg = document.querySelector(".spin-bg");
  var salut = document.querySelector(".fireworks-wrap");
  var bubleBtn = document.querySelector(".wheel__days-icons");
  var wheelBuble = document.querySelector(".wheel__buble");
  var popupContainer = document.querySelector(".popups");
  var popup = document.querySelector(".popup");
  var popupCloseBtn = document.querySelector(".popup__close");
  bubleBtn.addEventListener("mouseover", function (e) {
    wheelBuble.classList.remove("_hidden");
  });
  bubleBtn.addEventListener("mouseout", function (e) {
    wheelBuble.classList.add("_hidden");
  });
  document.addEventListener("click", function (e) {
    return e.target === bubleBtn ? null : wheelBuble.classList.add("_hidden");
  });
  var prizes = ['iphone', 'ecoflow', 'merch', 'nothing', "bonuses"];
  function getRandomPrize(arr) {
    return arr[Math.floor(Math.random() * prizes.length)];
  }
  function showPopup(sections, wheel, showClass, currentDay, spinBg, closeBtn, popupContainer, popup) {
    // document.querySelector(".fav-page").classList.add("popupBg")
    popup.classList.add("".concat(showClass));
    popup.classList.contains('_nothing') === true ? null : addFireworks(".popups", 7);
    currentDay === 7 ? popup.classList.add("_done") : popup.classList.add("_incomplete");
    popupContainer.classList.add("_opacity", "_zIndex");
    document.body.style.overflow = "hidden";
    spinBg.classList.remove("showSpinBg");
    var pers = document.querySelectorAll(".popup__pers");
    var prize = document.querySelectorAll(".popup__prize");
    var buble = document.querySelectorAll(".popup__buble");
    var popupBody = document.querySelector(".popup__main");
    var popupTitle = document.querySelectorAll(".popup__title");
    var popupLeftArrow = document.querySelectorAll(".popup__decor-left");
    var popupRightArrow = document.querySelectorAll(".popup__decor-right");
    currentDay === 7 ? popupBody.classList.add("_done") : popup.classList.add("_incomplete");
    document.querySelector(".fav-page").classList.remove("bgScale");
    function addAnim(arr, classAnim) {
      arr.forEach(function (item) {
        return item.classList.add("".concat(classAnim));
      });
    }

    //popup animations
    popupBody.classList.add("popupMainAnim");
    setTimeout(function () {
      addAnim(pers, "popupPersAnim");
      addAnim(buble, "popupBubleAnim");
    }, 600);
    setTimeout(function () {
      return addAnim(prize, "popupPrizeAnim");
    }, 1200);
    setTimeout(function () {
      return popupTitle.forEach(function (item) {
        return item.classList.add("popupTitleAnim");
      });
    }, 1800);
    setTimeout(function () {
      return popupLeftArrow.forEach(function (item) {
        return item.classList.add("popupLeftArrAnim");
      });
    }, 2400);
    setTimeout(function () {
      return popupRightArrow.forEach(function (item) {
        return item.classList.add("popupRightArrAnim");
      });
    }, 2700);

    //popup animations

    closeBtn.addEventListener("click", function () {
      popup.classList.contains('_nothing') === true ? null : addFireworks(".wheel", 7);
      wheel.classList.add("_lock");
      document.querySelector(".progress").classList.add("_lock");
      wheel.classList.remove("wheelSizeIncrease");
      document.body.style.overflow = "auto";
      popupContainer.classList.remove("_opacity", "_zIndex");
      popup.classList.remove("".concat(showClass), '_done', '_incomplete');
      removeFireworks(".popups");
      console.log(popup.classList.contains('_nothing'));

      // popupContainer.classList.contains('_nothing') === true ?  null :
    });
  }

  function spinWheel(position, animation, sections, btn, wheel, arrow, prize, spinBg, salut) {
    sections.addEventListener("animationend", function () {
      sections.style.transform = "translate(-50%, -50%) rotate(".concat(position, "deg)");
      // prize === "nothing" ? null : salut.classList.add("_opacity", "_zIndex")
      console.log(prize);
    }, {
      once: true
    });
    sections.classList.add("".concat(animation));
    arrow.style.opacity = "0";
    wheel.classList.add("wheelSizeIncrease");
    document.querySelector(".fav-page").classList.add("bgScale");
    spinBg.classList.add("showSpinBg");
    btn.style.pointerEvents = "none";
  }
  function firstSpin(sections, btn, wheel, arrow, prize, spinBg, salut) {
    btn.addEventListener("click", function () {
      if (prize === "iphone") {
        sections.addEventListener("animationend", function () {
          return showPopup(sections, wheel, "_iphone", currentDay, spinBg, popupCloseBtn, popupContainer, popup);
        });
        spinWheel(1800, "iphonePrize", sections, btn, wheel, arrow, prize, spinBg, salut);
      }
      if (prize === "ecoflow") {
        sections.addEventListener("animationend", function () {
          return showPopup(sections, wheel, "_ecoflow", currentDay, spinBg, popupCloseBtn, popupContainer, popup);
        });
        spinWheel(1665, "ecoflowPrize", sections, btn, wheel, arrow, prize, spinBg, salut);
      }
      if (prize === "merch") {
        sections.addEventListener("animationend", function () {
          return showPopup(sections, wheel, "_merch", currentDay, spinBg, popupCloseBtn, popupContainer, popup);
        });
        spinWheel(1711, "merchPrize", sections, btn, wheel, arrow, prize, spinBg, salut);
      }
      if (prize === "nothing") {
        sections.addEventListener("animationend", function () {
          return showPopup(sections, wheel, "_nothing", currentDay, spinBg, popupCloseBtn, popupContainer, popup);
        });
        spinWheel(1755, "nothingPrize", sections, btn, wheel, arrow, prize, spinBg, salut);
      }
      if (prize === "bonuses") {
        sections.addEventListener("animationend", function () {
          return showPopup(sections, wheel, "_bonus", currentDay, spinBg, popupCloseBtn, popupContainer, popup);
        });
        spinWheel(1935, "bonusesPrize", sections, btn, wheel, arrow, prize, spinBg, salut);
      }
    });
  }
  firstSpin(wheelSections, wheelBtn, wheelWrap, wheelArrow, getRandomPrize(prizes), spinBg, salut);

  //// accordion

  var accordionHeaders = document.querySelectorAll('.accordion__header');
  accordionHeaders.forEach(function (header) {
    header.addEventListener('click', function () {
      var content = header.nextElementSibling;
      document.querySelectorAll('.accordion__content').forEach(function (item) {
        if (item !== content) {
          item.style.display = 'none';
          item.previousElementSibling.classList.remove('open');
        }
      });
      if (content.style.display === 'block') {
        content.style.display = 'none';
        header.classList.remove('open');
      } else {
        content.style.display = 'block';
        header.classList.add('open');
      }
    });
  });

  //// for test

  var btnsWrap = document.querySelector('.btns-wrap');
  var buttons = btnsWrap.querySelectorAll('button');
  var dropIphoneButton = document.querySelector('.drop-iphone');
  var dropEcoflowButton = document.querySelector('.drop-ecoflow');
  var dropNothingButton = document.querySelector('.drop-nothing');
  var dropMerchButton = document.querySelector('.drop-merch');
  var dropBonusButton = document.querySelector('.drop-bonus');
  var dropDone = document.querySelector('.drop-done');
  var dropLock = document.querySelector('.drop-lock');
  var dropSign = document.querySelector('.drop-sign');
  // const dropIncomplete = document.querySelector('.drop-incomplete');
  var dropMenu = document.querySelector('.drop-menu');
  dropMenu.addEventListener("click", function () {
    return btnsWrap.classList.toggle("_hidden");
  });
  firstSpin(wheelSections, dropIphoneButton, wheelWrap, wheelArrow, "iphone", spinBg, salut);
  firstSpin(wheelSections, dropEcoflowButton, wheelWrap, wheelArrow, "ecoflow", spinBg, salut);
  firstSpin(wheelSections, dropNothingButton, wheelWrap, wheelArrow, "nothing", spinBg, salut);
  firstSpin(wheelSections, dropMerchButton, wheelWrap, wheelArrow, "merch", spinBg, salut);
  firstSpin(wheelSections, dropBonusButton, wheelWrap, wheelArrow, "bonuses", spinBg, salut);
  buttons.forEach(function (item) {
    item.addEventListener("click", function () {
      wheelSections.style.animationDuration = "0.1s";
      wheelSections.addEventListener("animationend", function () {
        wheelSections.style.animationDuration = "8s";
      });
    });
  });
  dropLock.addEventListener("click", function () {
    wheelWrap.classList.toggle("_lock");
    document.querySelector(".progress").classList.toggle("_lock");
    wheelWrap.classList.remove("_sign");
    document.querySelector(".progress").classList.remove("_sign");
  });
  dropSign.addEventListener("click", function () {
    wheelWrap.classList.toggle("_sign");
    document.querySelector(".progress").classList.toggle("_sign");
    wheelWrap.classList.remove("_lock");
    document.querySelector(".progress").classList.remove("_lock");
  });
  dropDone.addEventListener("click", function () {
    return currentDay = 7;
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZGF5cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwb3B1cERheXMiLCJwb3B1cERheXNNb2IiLCJjdXJyZW50RGF5Iiwic2V0RGF5cyIsImZvckVhY2giLCJkYXkiLCJpIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZGF5c1JlbWluZCIsImNsYXNzQW5pbSIsImRlbGF5Iiwic2V0VGltZW91dCIsImFkZCIsInJlbW92ZSIsInJhbmRvbUludGVydmFsIiwiTWF0aCIsInJhbmRvbSIsImFkZEZpcmV3b3JrcyIsImNvbnRhaW5lclNlbGVjdG9yIiwibnVtYmVyT2ZGaXJld29ya3MiLCJmaXJld29ya3NXcmFwIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImZpcmV3b3JrIiwiYXBwZW5kQ2hpbGQiLCJjb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiY29uc29sZSIsImVycm9yIiwicmVtb3ZlRmlyZXdvcmtzIiwid2FybiIsInN0YXJ0UmFuZG9tSW50ZXJ2YWwiLCJ3aGVlbFNlY3Rpb25zIiwid2hlZWxXcmFwIiwid2hlZWxBcnJvdyIsIndoZWVsQnRuIiwic3BpbkJnIiwic2FsdXQiLCJidWJsZUJ0biIsIndoZWVsQnVibGUiLCJwb3B1cENvbnRhaW5lciIsInBvcHVwIiwicG9wdXBDbG9zZUJ0biIsImUiLCJ0YXJnZXQiLCJwcml6ZXMiLCJnZXRSYW5kb21Qcml6ZSIsImFyciIsImZsb29yIiwibGVuZ3RoIiwic2hvd1BvcHVwIiwic2VjdGlvbnMiLCJ3aGVlbCIsInNob3dDbGFzcyIsImNsb3NlQnRuIiwiY29udGFpbnMiLCJib2R5Iiwic3R5bGUiLCJvdmVyZmxvdyIsInBlcnMiLCJwcml6ZSIsImJ1YmxlIiwicG9wdXBCb2R5IiwicG9wdXBUaXRsZSIsInBvcHVwTGVmdEFycm93IiwicG9wdXBSaWdodEFycm93IiwiYWRkQW5pbSIsIml0ZW0iLCJsb2ciLCJzcGluV2hlZWwiLCJwb3NpdGlvbiIsImFuaW1hdGlvbiIsImJ0biIsImFycm93IiwidHJhbnNmb3JtIiwib25jZSIsIm9wYWNpdHkiLCJwb2ludGVyRXZlbnRzIiwiZmlyc3RTcGluIiwiYWNjb3JkaW9uSGVhZGVycyIsImhlYWRlciIsImNvbnRlbnQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJkaXNwbGF5IiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImJ0bnNXcmFwIiwiYnV0dG9ucyIsImRyb3BJcGhvbmVCdXR0b24iLCJkcm9wRWNvZmxvd0J1dHRvbiIsImRyb3BOb3RoaW5nQnV0dG9uIiwiZHJvcE1lcmNoQnV0dG9uIiwiZHJvcEJvbnVzQnV0dG9uIiwiZHJvcERvbmUiLCJkcm9wTG9jayIsImRyb3BTaWduIiwiZHJvcE1lbnUiLCJhbmltYXRpb25EdXJhdGlvbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQUEsUUFBUSxDQUFDQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxZQUFLO0VBQy9DLElBQU1DLElBQUksR0FBR0YsUUFBUSxDQUFDRyxnQkFBZ0IsQ0FBQyxtQkFBbUIsQ0FBQztFQUMzRCxJQUFNQyxTQUFTLEdBQUdKLFFBQVEsQ0FBQ0csZ0JBQWdCLENBQUMsbUJBQW1CLENBQUM7RUFDaEUsSUFBTUUsWUFBWSxHQUFHTCxRQUFRLENBQUNHLGdCQUFnQixDQUFDLGFBQWEsQ0FBQztFQUM3RCxJQUFJRyxVQUFVLEdBQUcsQ0FBQztFQUVsQixTQUFTQyxPQUFPLENBQUNMLElBQUksRUFBRUksVUFBVSxFQUFDO0lBQzlCSixJQUFJLENBQUNNLE9BQU8sQ0FBQyxVQUFDQyxHQUFHLEVBQUVDLENBQUMsRUFBSTtNQUNwQixFQUFFQSxDQUFDO01BQ0hELEdBQUcsQ0FBQ0UsU0FBUyxDQUFDQyxNQUFNLENBQUMsTUFBTSxFQUFFRixDQUFDLEdBQUdKLFVBQVUsQ0FBQztNQUM1Q0csR0FBRyxDQUFDRSxTQUFTLENBQUNDLE1BQU0sQ0FBQyxNQUFNLEVBQUVGLENBQUMsR0FBR0osVUFBVSxDQUFDO01BQzVDRyxH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SUFDbkNaLFFBQVEsQ0FBQytCLGFBQWEsQ0FBQyxXQUFXLENBQUMsQ0FBQ3BCLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUM3RDBCLFNBQVMsQ0FBQzNCLFNBQVMsQ0FBQ08sTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUNuQ2xCLFFBQVEsQ0FBQytCLGFBQWEsQ0FBQyxXQUFXLENBQUMsQ0FBQ3BCLFNBQVMsQ0FBQ08sTUFBTSxDQUFDLE9BQU8sQ0FBQztFQUM3RCxDQUFDLENBQUM7RUFDRmlGLFFBQVEsQ0FBQ2xHLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxZQUFLO0lBQ3BDcUMsU0FBUyxDQUFDM0IsU0FBUyxDQUFDQyxNQUFNLENBQUMsT0FBTyxDQUFDO0lBQ25DWixRQUFRLENBQUMrQixhQUFhLENBQUMsV0FBVyxDQUFDLENBQUNwQixTQUFTLENBQUNDLE1BQU0sQ0FBQyxPQUFPLENBQUM7SUFDN0QwQixTQUFTLENBQUMzQixTQUFTLENBQUNPLE1BQU0sQ0FBQyxPQUFPLENBQUM7SUFDbkNsQixRQUFRLENBQUMrQixhQUFhLENBQUMsV0FBVyxDQUFDLENBQUNwQixTQUFTLENBQUNPLE1BQU0sQ0FBQyxPQUFPLENBQUM7RUFFakUsQ0FBQyxDQUFDO0VBRUYrRSxRQUFRLENBQUNoRyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUU7SUFBQSxPQUFNSyxVQUFVLEdBQUcsQ0FBQztFQUFBLEVBQUM7QUFFNUQsQ0FBQyxDQUFDIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PntcbiAgICBjb25zdCBkYXlzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi53aGVlbF9fZGF5cy1pdGVtXCIpXG4gICAgY29uc3QgcG9wdXBEYXlzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fZGF5cy1pdGVtXCIpO1xuICAgIGNvbnN0IHBvcHVwRGF5c01vYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZGF5c19faXRlbVwiKTtcbiAgICBsZXQgY3VycmVudERheSA9IDVcblxuICAgIGZ1bmN0aW9uIHNldERheXMoZGF5cywgY3VycmVudERheSl7XG4gICAgICAgIGRheXMuZm9yRWFjaCgoZGF5LCBpKSA9PntcbiAgICAgICAgICAgICsraVxuICAgICAgICAgICAgZGF5LmNsYXNzTGlzdC50b2dnbGUoXCJuZXh0XCIsIGkgPiBjdXJyZW50RGF5KTtcbiAgICAgICAgICAgIGRheS5jbGFzc0xpc3QudG9nZ2xlKFwicGFzdFwiLCBpIDwgY3VycmVudERheSk7XG4gICAgICAgICAgICBkYXkuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiLCBpID09PSBjdXJyZW50RGF5KTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkYXlzUmVtaW5kKGRheXMsIGNsYXNzQW5pbSkge1xuICAgICAgICBsZXQgZGVsYXkgPSA5MDA7XG4gICAgICAgIGRheXMuZm9yRWFjaCgoZGF5LCBpKSA9PiB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBkYXkuY2xhc3NMaXN0LmFkZChjbGFzc0FuaW0pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZGF5LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NBbmltKSwgMTIwMClcbiAgICAgICAgICAgIH0sIGRlbGF5ICogaSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGNvbnN0IHJhbmRvbUludGVydmFsID0gTWF0aC5yYW5kb20oKSAqICgyMDAwMCAtIDEwMDAwKSArIDEwMDAwO1xuICAgIGNvbnN0IHJhbmRvbUludGVydmFsID0gTWF0aC5yYW5kb20oKSAqICg2MDAwIC0gNDAwMCkgKyA0MDAwO1xuXG5cblxuICAgIGZ1bmN0aW9uIGFkZEZpcmV3b3Jrcyhjb250YWluZXJTZWxlY3RvciwgbnVtYmVyT2ZGaXJld29ya3MpIHtcbiAgICAgICAgLy8g0KHRgtCy0L7RgNC10L3QvdGPINC90L7QstC+0LPQviDQsdC70L7QutGDIC5maXJld29ya3Mtd3JhcFxuICAgICAgICBjb25zdCBmaXJld29ya3NXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGZpcmV3b3Jrc1dyYXAuY2xhc3NOYW1lID0gJ2ZpcmV3b3Jrcy13cmFwJztcblxuICAgICAgICAvLyDQlNC+0LTQsNCy0LDQvdC90Y8g0LLQutCw0LfQsNC90L7RlyDQutGW0LvRjNC60L7RgdGC0ZYgLmZpcmV3b3JrINC10LvQtdC80LXQvdGC0ZbQsiDQtNC+IGZpcmV3b3Jrc1dyYXBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJPZkZpcmV3b3JrczsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBmaXJld29yayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgZmlyZXdvcmsuY2xhc3NOYW1lID0gJ2ZpcmV3b3JrJztcbiAgICAgICAgICAgIGZpcmV3b3Jrc1dyYXAuYXBwZW5kQ2hpbGQoZmlyZXdvcmspO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g0JfQvdCw0YXQvtC00LjQvNC+INC60L7QvdGC0LXQudC90LXRgCwg0LIg0Y/QutC40Lkg0YXQvtGH0LXQvNC+INC00L7QtNCw0YLQuCBmaXJld29ya3NXcmFwXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuXG4gICAgICAgIC8vINCU0L7QtNCw0ZTQvNC+IGZpcmV3b3Jrc1dyYXAg0LTQviDQutC+0L3RgtC10LnQvdC10YDQsFxuICAgICAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZmlyZXdvcmtzV3JhcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGDQmtC+0L3RgtC10LnQvdC10YAg0Lcg0YHQtdC70LXQutGC0L7RgNC+0LwgXCIke2NvbnRhaW5lclNlbGVjdG9yfVwiINC90LUg0LfQvdCw0LnQtNC10L3Qvi5gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZUZpcmV3b3Jrcyhjb250YWluZXJTZWxlY3Rvcikge1xuICAgICAgICAvLyDQl9C90LDRhdC+0LTQuNC80L4g0LrQvtC90YLQtdC50L3QtdGAXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuXG4gICAgICAgIC8vINCv0LrRidC+INC60L7QvdGC0LXQudC90LXRgCDRltGB0L3Rg9GULCDQt9C90LDRhdC+0LTQuNC80L4g0LIg0L3RjNC+0LzRgyDQsdC70L7QuiAuZmlyZXdvcmtzLXdyYXAg0ZYg0LLQuNC00LDQu9GP0ZTQvNC+INC50L7Qs9C+XG4gICAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpcmV3b3Jrc1dyYXAgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmZpcmV3b3Jrcy13cmFwJyk7XG4gICAgICAgICAgICBpZiAoZmlyZXdvcmtzV3JhcCkge1xuICAgICAgICAgICAgICAgIGZpcmV3b3Jrc1dyYXAucmVtb3ZlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihg0JXQu9C10LzQtdC90YIg0Lcg0LrQu9Cw0YHQvtC8IFwiLmZpcmV3b3Jrcy13cmFwXCIg0L3QtSDQt9C90LDQudC00LXQvdC+INCyINC60L7QvdGC0LXQudC90LXRgNGWICR7Y29udGFpbmVyU2VsZWN0b3J9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihg0JrQvtC90YLQtdC50L3QtdGAINC3INGB0LXQu9C10LrRgtC+0YDQvtC8IFwiJHtjb250YWluZXJTZWxlY3Rvcn1cIiDQvdC1INC30L3QsNC50LTQtdC90L4uYCk7XG4gICAgICAgIH1cbiAgICB9XG5cbi8vINCS0LjQutC+0YDQuNGB0YLQsNC90L3RjyDRhNGD0L3QutGG0ZbRlyDQtNC70Y8g0LLQuNC00LDQu9C10L3QvdGPINCx0LvQvtC60YNcbi8vICAgICByZW1vdmVGaXJld29ya3MoJy5jb250YWluZXInKTtcblxuXG5cblxuLy8g0JLQuNC60L7RgNC40YHRgtCw0L3QvdGPINGE0YPQvdC60YbRltGXINC00LvRjyDQtNC+0LTQsNCy0LDQvdC90Y8g0LHQu9C+0LrRg1xuLy9cblxuXG5cblxuXG5cblxuXG5cbiAgICBmdW5jdGlvbiBzdGFydFJhbmRvbUludGVydmFsKCkge1xuICAgICAgICBjb25zdCByYW5kb21JbnRlcnZhbCA9IE1hdGgucmFuZG9tKCkgKiAoMjAwMDAgLSAxMDAwMCkgKyAxMDAwMDsgLy8g0JLQuNC/0LDQtNC60L7QstC40Lkg0ZbQvdGC0LXRgNCy0LDQuyDQvNGW0LYgMTAg0ZYgMjAg0YHQtdC60YPQvdC00LDQvNC4XG4gICAgICAgIGRheXNSZW1pbmQoZGF5cywgXCJyZW1pbmRcIik7XG4gICAgICAgIGRheXNSZW1pbmQocG9wdXBEYXlzLCBcInJlbWluZFwiKTtcbiAgICAgICAgZGF5c1JlbWluZChwb3B1cERheXNNb2IsIFwicmVtaW5kXCIpO1xuICAgICAgICBzZXRUaW1lb3V0KHN0YXJ0UmFuZG9tSW50ZXJ2YWwsIHJhbmRvbUludGVydmFsKTtcbiAgICB9XG5cbiAgICBzdGFydFJhbmRvbUludGVydmFsKCk7XG4gICAgZGF5c1JlbWluZChkYXlzLCBcInJlbWluZFwiKVxuXG4gICAgc2V0RGF5cyhkYXlzLCBjdXJyZW50RGF5KVxuICAgIHNldERheXMocG9wdXBEYXlzLCBjdXJyZW50RGF5KVxuICAgIHNldERheXMocG9wdXBEYXlzTW9iLCBjdXJyZW50RGF5KVxuLy8gYWRkQW5pbWF0aW9uQ2xhc3MoKVxuXG4vLy8gd2hlZWwgbG9naWNcbiAgICBjb25zdCB3aGVlbFNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aGVlbF9fc2VjdGlvbnNcIilcbiAgICBjb25zdCB3aGVlbFdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndoZWVsX193cmFwXCIpXG4gICAgY29uc3Qgd2hlZWxBcnJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2hlZWxfX2Fycm93XCIpXG4gICAgY29uc3Qgd2hlZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndoZWVsX19idG5cIilcbiAgICBjb25zdCBzcGluQmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNwaW4tYmdcIilcbiAgICBjb25zdCBzYWx1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmlyZXdvcmtzLXdyYXBcIilcbiAgICBjb25zdCBidWJsZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2hlZWxfX2RheXMtaWNvbnNcIilcbiAgICBjb25zdCB3aGVlbEJ1YmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aGVlbF9fYnVibGVcIilcbiAgICBjb25zdCBwb3B1cENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBzXCIpXG4gICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwXCIpXG4gICAgY29uc3QgcG9wdXBDbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpXG5cbiAgICBidWJsZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIChlKSA9PntcbiAgICAgICAgd2hlZWxCdWJsZS5jbGFzc0xpc3QucmVtb3ZlKFwiX2hpZGRlblwiKVxuICAgIH0pXG4gICAgYnVibGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIChlKSA9PntcbiAgICAgICAgd2hlZWxCdWJsZS5jbGFzc0xpc3QuYWRkKFwiX2hpZGRlblwiKVxuICAgIH0pXG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiBlLnRhcmdldCA9PT0gYnVibGVCdG4gPyBudWxsIDogd2hlZWxCdWJsZS5jbGFzc0xpc3QuYWRkKFwiX2hpZGRlblwiKSlcblxuICAgIGxldCBwcml6ZXMgPSBbJ2lwaG9uZScsICdlY29mbG93JywgJ21lcmNoJywgJ25vdGhpbmcnLCBcImJvbnVzZXNcIl1cbiAgICBmdW5jdGlvbiBnZXRSYW5kb21Qcml6ZShhcnIpIHtcbiAgICAgICAgcmV0dXJuIGFycltNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwcml6ZXMubGVuZ3RoKV07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNob3dQb3B1cChzZWN0aW9ucywgd2hlZWwsIHNob3dDbGFzcywgY3VycmVudERheSwgc3BpbkJnLCBjbG9zZUJ0biwgcG9wdXBDb250YWluZXIsIHBvcHVwKXtcbiAgICAgICAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mYXYtcGFnZVwiKS5jbGFzc0xpc3QuYWRkKFwicG9wdXBCZ1wiKVxuICAgICAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKGAke3Nob3dDbGFzc31gKVxuICAgICAgICBwb3B1cC5jbGFzc0xpc3QuY29udGFpbnMoJ19ub3RoaW5nJykgPT09IHRydWUgPyBudWxsIDogYWRkRmlyZXdvcmtzKFwiLnBvcHVwc1wiLCA3KVxuICAgICAgICBjdXJyZW50RGF5ID09PSA3ID8gcG9wdXAuY2xhc3NMaXN0LmFkZChcIl9kb25lXCIpIDogcG9wdXAuY2xhc3NMaXN0LmFkZChcIl9pbmNvbXBsZXRlXCIpXG4gICAgICAgIHBvcHVwQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJfb3BhY2l0eVwiLCBcIl96SW5kZXhcIilcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCJcbiAgICAgICAgc3BpbkJnLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93U3BpbkJnXCIpXG4gICAgICAgIGNvbnN0IHBlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19wZXJzXCIpXG4gICAgICAgIGNvbnN0IHByaXplID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fcHJpemVcIilcbiAgICAgICAgY29uc3QgYnVibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19idWJsZVwiKVxuICAgICAgICBjb25zdCBwb3B1cEJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19tYWluXCIpXG4gICAgICAgIGNvbnN0IHBvcHVwVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX190aXRsZVwiKVxuICAgICAgICBjb25zdCBwb3B1cExlZnRBcnJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2RlY29yLWxlZnRcIilcbiAgICAgICAgY29uc3QgcG9wdXBSaWdodEFycm93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fZGVjb3ItcmlnaHRcIilcbiAgICAgICAgY3VycmVudERheSA9PT0gNyA/IHBvcHVwQm9keS5jbGFzc0xpc3QuYWRkKFwiX2RvbmVcIikgOiBwb3B1cC5jbGFzc0xpc3QuYWRkKFwiX2luY29tcGxldGVcIilcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mYXYtcGFnZVwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiYmdTY2FsZVwiKVxuXG5cblxuICAgICAgICBmdW5jdGlvbiBhZGRBbmltKGFyciwgY2xhc3NBbmltKXtcbiAgICAgICAgICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5jbGFzc0xpc3QuYWRkKGAke2NsYXNzQW5pbX1gKSApXG4gICAgICAgIH1cblxuICAgICAgICAvL3BvcHVwIGFuaW1hdGlvbnNcbiAgICAgICAgcG9wdXBCb2R5LmNsYXNzTGlzdC5hZGQoXCJwb3B1cE1haW5BbmltXCIpXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICBhZGRBbmltKHBlcnMsIFwicG9wdXBQZXJzQW5pbVwiKVxuICAgICAgICAgICAgYWRkQW5pbShidWJsZSwgXCJwb3B1cEJ1YmxlQW5pbVwiKVxuICAgICAgICB9LCA2MDApXG4gICAgICAgIHNldFRpbWVvdXQoICgpID0+IGFkZEFuaW0ocHJpemUsIFwicG9wdXBQcml6ZUFuaW1cIiksIDEyMDApXG4gICAgICAgIHNldFRpbWVvdXQoICgpID0+IHBvcHVwVGl0bGUuZm9yRWFjaChpdGVtID0+IGl0ZW0uY2xhc3NMaXN0LmFkZChcInBvcHVwVGl0bGVBbmltXCIpKSwgMTgwMClcbiAgICAgICAgc2V0VGltZW91dCggKCkgPT4gcG9wdXBMZWZ0QXJyb3cuZm9yRWFjaChpdGVtID0+IGl0ZW0uY2xhc3NMaXN0LmFkZChcInBvcHVwTGVmdEFyckFuaW1cIikpLCAyNDAwKVxuICAgICAgICBzZXRUaW1lb3V0KCAoKSA9PiBwb3B1cFJpZ2h0QXJyb3cuZm9yRWFjaChpdGVtID0+IGl0ZW0uY2xhc3NMaXN0LmFkZChcInBvcHVwUmlnaHRBcnJBbmltXCIpKSwgMjcwMClcblxuICAgICAgICAvL3BvcHVwIGFuaW1hdGlvbnNcblxuXG4gICAgICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICAgICAgICAgIHBvcHVwLmNsYXNzTGlzdC5jb250YWlucygnX25vdGhpbmcnKSA9PT0gdHJ1ZSA/IG51bGwgOiBhZGRGaXJld29ya3MoXCIud2hlZWxcIiwgNylcbiAgICAgICAgICAgIHdoZWVsLmNsYXNzTGlzdC5hZGQoXCJfbG9ja1wiKVxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9ncmVzc1wiKS5jbGFzc0xpc3QuYWRkKFwiX2xvY2tcIilcbiAgICAgICAgICAgIHdoZWVsLmNsYXNzTGlzdC5yZW1vdmUoXCJ3aGVlbFNpemVJbmNyZWFzZVwiKVxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiXG4gICAgICAgICAgICBwb3B1cENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiX29wYWNpdHlcIiwgXCJfekluZGV4XCIpXG4gICAgICAgICAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKGAke3Nob3dDbGFzc31gLCAnX2RvbmUnLCAnX2luY29tcGxldGUnKVxuICAgICAgICAgICAgcmVtb3ZlRmlyZXdvcmtzKFwiLnBvcHVwc1wiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBvcHVwLmNsYXNzTGlzdC5jb250YWlucygnX25vdGhpbmcnKSlcblxuICAgICAgICAgICAgLy8gcG9wdXBDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdfbm90aGluZycpID09PSB0cnVlID8gIG51bGwgOlxuXG5cbiAgICAgICAgfSlcbiAgICB9XG4gICAgZnVuY3Rpb24gc3BpbldoZWVsKHBvc2l0aW9uLCBhbmltYXRpb24sIHNlY3Rpb25zLCBidG4sIHdoZWVsLCBhcnJvdywgcHJpemUsIHNwaW5CZywgc2FsdXQpe1xuICAgICAgICBzZWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsICgpID0+e1xuICAgICAgICAgICAgc2VjdGlvbnMuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSByb3RhdGUoJHtwb3NpdGlvbn1kZWcpYFxuICAgICAgICAgICAgLy8gcHJpemUgPT09IFwibm90aGluZ1wiID8gbnVsbCA6IHNhbHV0LmNsYXNzTGlzdC5hZGQoXCJfb3BhY2l0eVwiLCBcIl96SW5kZXhcIilcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHByaXplKVxuICAgICAgICB9LCB7b25jZTogdHJ1ZX0pXG4gICAgICAgIHNlY3Rpb25zLmNsYXNzTGlzdC5hZGQoYCR7YW5pbWF0aW9ufWApXG4gICAgICAgIGFycm93LnN0eWxlLm9wYWNpdHkgPSBcIjBcIlxuICAgICAgICB3aGVlbC5jbGFzc0xpc3QuYWRkKFwid2hlZWxTaXplSW5jcmVhc2VcIilcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mYXYtcGFnZVwiKS5jbGFzc0xpc3QuYWRkKFwiYmdTY2FsZVwiKVxuICAgICAgICBzcGluQmcuY2xhc3NMaXN0LmFkZChcInNob3dTcGluQmdcIilcbiAgICAgICAgYnRuLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIlxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZpcnN0U3BpbihzZWN0aW9ucywgYnRuLCB3aGVlbCwgYXJyb3csIHByaXplLCBzcGluQmcsIHNhbHV0KXtcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICAgICAgICAgIGlmKHByaXplID09PSBcImlwaG9uZVwiKXtcbiAgICAgICAgICAgICAgICBzZWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsICgpID0+IHNob3dQb3B1cChzZWN0aW9ucywgd2hlZWwsIFwiX2lwaG9uZVwiLCBjdXJyZW50RGF5LCBzcGluQmcsIHBvcHVwQ2xvc2VCdG4sIHBvcHVwQ29udGFpbmVyLCBwb3B1cCkpXG4gICAgICAgICAgICAgICAgc3BpbldoZWVsKDE4MDAsIFwiaXBob25lUHJpemVcIiwgc2VjdGlvbnMsIGJ0biwgd2hlZWwsIGFycm93LCBwcml6ZSwgc3BpbkJnLCBzYWx1dClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHByaXplID09PSBcImVjb2Zsb3dcIil7XG4gICAgICAgICAgICAgICAgc2VjdGlvbnMuYWRkRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLCAoKSA9PiBzaG93UG9wdXAoc2VjdGlvbnMsIHdoZWVsLCBcIl9lY29mbG93XCIsIGN1cnJlbnREYXksIHNwaW5CZywgcG9wdXBDbG9zZUJ0biwgcG9wdXBDb250YWluZXIsIHBvcHVwKSlcbiAgICAgICAgICAgICAgICBzcGluV2hlZWwoMTY2NSwgXCJlY29mbG93UHJpemVcIiwgc2VjdGlvbnMsIGJ0biwgd2hlZWwsIGFycm93LCBwcml6ZSwgc3BpbkJnLCBzYWx1dClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHByaXplID09PSBcIm1lcmNoXCIpe1xuICAgICAgICAgICAgICAgIHNlY3Rpb25zLmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIiwgKCkgPT4gc2hvd1BvcHVwKHNlY3Rpb25zLCB3aGVlbCwgXCJfbWVyY2hcIiwgY3VycmVudERheSwgc3BpbkJnLCBwb3B1cENsb3NlQnRuLCBwb3B1cENvbnRhaW5lciwgcG9wdXApKVxuICAgICAgICAgICAgICAgIHNwaW5XaGVlbCgxNzExLCBcIm1lcmNoUHJpemVcIiwgc2VjdGlvbnMsIGJ0biwgd2hlZWwsIGFycm93LCBwcml6ZSwgc3BpbkJnLCBzYWx1dClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHByaXplID09PSBcIm5vdGhpbmdcIil7XG4gICAgICAgICAgICAgICAgc2VjdGlvbnMuYWRkRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLCAoKSA9PiBzaG93UG9wdXAoc2VjdGlvbnMsIHdoZWVsLFwiX25vdGhpbmdcIiwgY3VycmVudERheSwgc3BpbkJnLCBwb3B1cENsb3NlQnRuLCBwb3B1cENvbnRhaW5lciwgcG9wdXApKVxuICAgICAgICAgICAgICAgIHNwaW5XaGVlbCgxNzU1LCBcIm5vdGhpbmdQcml6ZVwiLCBzZWN0aW9ucywgYnRuLCB3aGVlbCwgYXJyb3csIHByaXplLCBzcGluQmcsIHNhbHV0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYocHJpemUgPT09IFwiYm9udXNlc1wiKXtcbiAgICAgICAgICAgICAgICBzZWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsICgpID0+IHNob3dQb3B1cChzZWN0aW9ucywgd2hlZWwsIFwiX2JvbnVzXCIsIGN1cnJlbnREYXksIHNwaW5CZywgcG9wdXBDbG9zZUJ0biwgcG9wdXBDb250YWluZXIsIHBvcHVwKSlcbiAgICAgICAgICAgICAgICBzcGluV2hlZWwoMTkzNSwgXCJib251c2VzUHJpemVcIiwgc2VjdGlvbnMsIGJ0biwgd2hlZWwsIGFycm93LCBwcml6ZSwgc3BpbkJnLCBzYWx1dClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmaXJzdFNwaW4od2hlZWxTZWN0aW9ucywgd2hlZWxCdG4sIHdoZWVsV3JhcCwgd2hlZWxBcnJvdywgZ2V0UmFuZG9tUHJpemUocHJpemVzKSwgc3BpbkJnLCBzYWx1dClcblxuXG5cblxuXG5cbi8vLy8gYWNjb3JkaW9uXG5cbiAgICBjb25zdCBhY2NvcmRpb25IZWFkZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFjY29yZGlvbl9faGVhZGVyJyk7XG4gICAgYWNjb3JkaW9uSGVhZGVycy5mb3JFYWNoKGhlYWRlciA9PiB7XG4gICAgICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBoZWFkZXIubmV4dEVsZW1lbnRTaWJsaW5nO1xuXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjb3JkaW9uX19jb250ZW50JykuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ucHJldmlvdXNFbGVtZW50U2libGluZy5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS5kaXNwbGF5ID09PSAnYmxvY2snKSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cblxuLy8vLyBmb3IgdGVzdFxuXG4gICAgY29uc3QgYnRuc1dyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRucy13cmFwJyk7XG5cbiAgICBjb25zdCBidXR0b25zID0gYnRuc1dyYXAucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJyk7XG5cbiAgICBjb25zdCBkcm9wSXBob25lQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRyb3AtaXBob25lJyk7XG4gICAgY29uc3QgZHJvcEVjb2Zsb3dCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJvcC1lY29mbG93Jyk7XG4gICAgY29uc3QgZHJvcE5vdGhpbmdCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJvcC1ub3RoaW5nJyk7XG4gICAgY29uc3QgZHJvcE1lcmNoQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRyb3AtbWVyY2gnKTtcbiAgICBjb25zdCBkcm9wQm9udXNCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJvcC1ib251cycpO1xuICAgIGNvbnN0IGRyb3BEb25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRyb3AtZG9uZScpO1xuICAgIGNvbnN0IGRyb3BMb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRyb3AtbG9jaycpO1xuICAgIGNvbnN0IGRyb3BTaWduID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRyb3Atc2lnbicpO1xuLy8gY29uc3QgZHJvcEluY29tcGxldGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJvcC1pbmNvbXBsZXRlJyk7XG4gICAgY29uc3QgZHJvcE1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJvcC1tZW51Jyk7XG5cbiAgICBkcm9wTWVudS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PiBidG5zV3JhcC5jbGFzc0xpc3QudG9nZ2xlKFwiX2hpZGRlblwiKSlcblxuICAgIGZpcnN0U3Bpbih3aGVlbFNlY3Rpb25zLCBkcm9wSXBob25lQnV0dG9uLCB3aGVlbFdyYXAsIHdoZWVsQXJyb3csIFwiaXBob25lXCIsIHNwaW5CZywgc2FsdXQpXG4gICAgZmlyc3RTcGluKHdoZWVsU2VjdGlvbnMsIGRyb3BFY29mbG93QnV0dG9uLCB3aGVlbFdyYXAsIHdoZWVsQXJyb3csIFwiZWNvZmxvd1wiLCBzcGluQmcsIHNhbHV0KVxuICAgIGZpcnN0U3Bpbih3aGVlbFNlY3Rpb25zLCBkcm9wTm90aGluZ0J1dHRvbiwgd2hlZWxXcmFwLCB3aGVlbEFycm93LCBcIm5vdGhpbmdcIiwgc3BpbkJnLCBzYWx1dClcbiAgICBmaXJzdFNwaW4od2hlZWxTZWN0aW9ucywgZHJvcE1lcmNoQnV0dG9uLCB3aGVlbFdyYXAsIHdoZWVsQXJyb3csIFwibWVyY2hcIiwgc3BpbkJnLCBzYWx1dClcbiAgICBmaXJzdFNwaW4od2hlZWxTZWN0aW9ucywgZHJvcEJvbnVzQnV0dG9uLCB3aGVlbFdyYXAsIHdoZWVsQXJyb3csIFwiYm9udXNlc1wiLCBzcGluQmcsIHNhbHV0KVxuXG4gICAgYnV0dG9ucy5mb3JFYWNoKGl0ZW0gPT57XG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHdoZWVsU2VjdGlvbnMuc3R5bGUuYW5pbWF0aW9uRHVyYXRpb24gPSBcIjAuMXNcIlxuICAgICAgICAgICAgd2hlZWxTZWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsICgpID0+e1xuICAgICAgICAgICAgICAgIHdoZWVsU2VjdGlvbnMuc3R5bGUuYW5pbWF0aW9uRHVyYXRpb24gPSBcIjhzXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfSlcblxuXG4gICAgZHJvcExvY2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+e1xuICAgIHdoZWVsV3JhcC5jbGFzc0xpc3QudG9nZ2xlKFwiX2xvY2tcIilcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2dyZXNzXCIpLmNsYXNzTGlzdC50b2dnbGUoXCJfbG9ja1wiKVxuICAgIHdoZWVsV3JhcC5jbGFzc0xpc3QucmVtb3ZlKFwiX3NpZ25cIilcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2dyZXNzXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJfc2lnblwiKVxuICAgIH0pXG4gICAgZHJvcFNpZ24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+e1xuICAgICAgICB3aGVlbFdyYXAuY2xhc3NMaXN0LnRvZ2dsZShcIl9zaWduXCIpXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZ3Jlc3NcIikuY2xhc3NMaXN0LnRvZ2dsZShcIl9zaWduXCIpXG4gICAgICAgIHdoZWVsV3JhcC5jbGFzc0xpc3QucmVtb3ZlKFwiX2xvY2tcIilcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9ncmVzc1wiKS5jbGFzc0xpc3QucmVtb3ZlKFwiX2xvY2tcIilcblxuICAgIH0pXG5cbiAgICBkcm9wRG9uZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY3VycmVudERheSA9IDcpXG5cbn0pXG5cblxuXG5cblxuXG4iXX0=
